# 作业6

## 1. P3

### 题目

在4. 2节中,我们注意到如果交换结构速率是输入线路速率的 $n$ 倍，其最大的排队时延为$(n-1)D$。 假设所有分组有相同长度，在相同时刻 $n$ 个分组到达几个输出端口，同时所有 $n$ 个分组要转发到不同的输出端口。对于内存、总线和纵横式交换结构，一个分组的最大时延是多少？ 

### 回答

由题意可知仅考虑输入端口排队时延。

对于内存和总线式的交换机构，交换过程需要竞争总线，故同一时间只能对一个输入端口的分组进行交换。其他端口的分组则需要等待。故最大时延为最后一个被传输的分组所等待的时间，即 $(n-1)D$.

对于纵横式交换结构，由于 $n$ 个分组要转发到不同的输出端口，故可以同时进行转发，所以最大时延为0.



## 2. P5

### 题目

考虑使用32比特主机地址的某数据报网络。假定一台路由器具有4条链路，编号为0~3,分组能被转发到如下的各链路接口：

|                         目的地址范围                         | 链路接口 |
| :----------------------------------------------------------: | :------: |
| 11100000 00000000 00000000 00000000 到 11100000 00111111 11111111 11111111 |    0     |
| 11100000 01000000 00000000 00000000 到 11100000 01000000 11111111 11111111 |    1     |
| 11100000 01000001 00000000 00000000 到 11100001 01111111 11111111 11111111 |    2     |
|                             其他                             |    3     |

**a. 提供一个具有5个表项的转发表，使用最长前缀匹配，转发分组到正确的链路接口。** 

**b. 描述你的转发表是如何为具有下列目的地址的数据报决定适当的链路接口的。**

11001000 10010001 01010001 01010101 

11100001 01000000 11000011 00111100 

11100001 10000000 00010001 01110111

### 回答

a. 转发表如下：

| 前缀              | 接口 |
| :---------------- | :--- |
| 11100000 00       | 0    |
| 11100000 01000000 | 1    |
| 1110000           | 2    |
| 11100001 1        | 3    |
| 其他              | 3    |

b. 

11001000 10010001 01010001 01010101 在上表中无明确的前缀与之匹配，故为其他，使用3号链路接口；

11100001 01000000 11000011 00111100 在上表中匹配到前缀 1110000，故选择2号链路接口

11100001 10000000 00010001 01110111 在上表中匹配到前缀 11100001 1，故选择3号链路接口



## 3. P7

### 题目

考虑使用8比特主机地址的数据报网络。假定一台路由器使用最长前缀匹配并具有下列转发表:

| 前缀匹配 | 接口 |
| -------- | ---- |
| 1        | 0    |
| 10       | 1    |
| 111      | 2    |
| 其他     | 3    |

对这4个接口中的每个，给出相应的目的主机地址的范围和在该范围中的地址数量。 

### 回答

接口 2 前缀 111 匹配的范围为：11100000 到 111111111，范围内的主机数为 $2^5 = 32$ 

接口 1 前缀 10 匹配的范围为：10000000 到 10111111，范围内的主机数为 $2^6=64$

接口 0 前缀 1 匹配的范围为：11000000 到 11011111，范围内的主机数为 $2^5=32$

接口 3 匹配的范围为：00000000 到 01111111，范围内的主机数为 $2^7=128$

整理一下，即

| 接口 |       地址范围        | 主机数 |
| :--: | :-------------------: | :----: |
|  0   | 11000000 到 11011111  |   32   |
|  1   | 10000000 到 10111111  |   64   |
|  2   | 11100000 到 111111111 |   32   |
|  3   | 00000000 到 01111111  |  128   |